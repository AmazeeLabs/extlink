(function(e){function t(t){var n=/^(([^\/:]+?\.)*)([^\.:]{4,})((\.[a-z]{1,4})*)(:[0-9]{1,5})?$/;var r=window.location.host.replace(n,"$3$4");var i=window.location.host.replace(n,"$1");if(Drupal.settings.extlink.extSubdomains){var s="([^/]*\\.)?"}else if(i=="www."||i==""){var s="(www\\.)?"}else{var s=i.replace(".","\\.")}var o=new RegExp("^https?://"+s+r,"i");var u=false;if(Drupal.settings.extlink.extInclude){u=new RegExp(Drupal.settings.extlink.extInclude.replace(/\\/,"\\"))}var a=false;if(Drupal.settings.extlink.extExclude){a=new RegExp(Drupal.settings.extlink.extExclude.replace(/\\/,"\\"))}var f=new Array;var l=new Array;e("a:not(."+Drupal.settings.extlink.extClass+", ."+Drupal.settings.extlink.mailtoClass+"), area:not(."+Drupal.settings.extlink.extClass+", ."+Drupal.settings.extlink.mailtoClass+")",t).each(function(e){try{var t=this.href.toLowerCase();if(t.indexOf("http")==0&&(!t.match(o)||u&&t.match(u))&&!(a&&t.match(a))){f.push(this)}else if(this.tagName!="AREA"&&t.indexOf("mailto:")==0){l.push(this)}}catch(n){return false}});if(Drupal.settings.extlink.extClass){if(parseFloat(e().jquery)<1.2){e(f).not("[img]").addClass(Drupal.settings.extlink.extClass).each(function(){if(e(this).css("display")=="inline")e(this).after("<span class="+Drupal.settings.extlink.extClass+"></span>")})}else{e(f).not(e(f).find("img").parents("a")).addClass(Drupal.settings.extlink.extClass).each(function(){if(e(this).css("display")=="inline")e(this).after("<span class="+Drupal.settings.extlink.extClass+"></span>")})}}if(Drupal.settings.extlink.mailtoClass){if(parseFloat(e().jquery)<1.2){e(l).not("[img]").addClass(Drupal.settings.extlink.mailtoClass).each(function(){if(e(this).css("display")=="inline")e(this).after("<span class="+Drupal.settings.extlink.mailtoClass+"></span>")})}else{e(l).not(e(l).find("img").parents("a")).addClass(Drupal.settings.extlink.mailtoClass).each(function(){if(e(this).css("display")=="inline")e(this).after("<span class="+Drupal.settings.extlink.mailtoClass+"></span>")})}}if(Drupal.settings.extlink.extTarget){e(f).attr("target",Drupal.settings.extlink.extTarget)}if(Drupal.settings.extlink.extAlert){e(f).click(function(e){return confirm(Drupal.settings.extlink.extAlertText)})}if(e.support&&!(e.support.boxModel===undefined)&&!e.support.boxModel||e.browser.msie&&parseInt(e.browser.version)<=7){e("span.ext, span.mailto").css("display","inline-block")}}Drupal.behaviors.extlink={attach:function(e){t(e)}}})(jQuery)